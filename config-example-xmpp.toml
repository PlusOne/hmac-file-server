# HMAC File Server - Example XMPP Configuration
# This is a sample configuration for XMPP integration with Prosody/Ejabberd

[server]
listenport = "8080"
unixsocket = false
storagepath = "/var/lib/hmac-file-server/uploads"
metricsenabled = true
metricsport = "9090"
deduplicationenabled = true
minfreebytes = "5GB"
filettl = "2y"
filettlenabled = false
autoadjustworkers = true
networkevents = false
pidfilepath = "./hmac-file-server.pid"
precaching = false

[deduplication]
enabled = true
directory = "/var/lib/hmac-file-server/deduplication"

[logging]
level = "info"
file = "/var/log/hmac-file-server/hmac-file-server.log"
max_size = 100
max_backups = 7
max_age = 30
compress = true

[security]
secret = "your-super-secret-hmac-key-here-minimum-32-characters"
enablejwt = false
# jwtkey = "your-jwt-secret-key-here"
# jwtalgorithm = "HS256"
# jwtexpiry = "24h"

[uploads]
maxfilesize = "1GB"
allowedextensions = [".jpg", ".jpeg", ".png", ".gif", ".pdf", ".txt", ".zip"]
blockedextensions = [".exe", ".bat", ".sh", ".cmd"]

[downloads]
ratelimit = true
maxconcurrentdownloads = 10

[clamav]
enabled = false
host = "localhost"
port = 3310
timeout = "30s"
maxfilesize = "100MB"

[redis]
enabled = false
host = "localhost"
port = 6379
password = ""
database = 0

[workers]
maxworkers = 10
initialworkers = 2
autoscaling = true
